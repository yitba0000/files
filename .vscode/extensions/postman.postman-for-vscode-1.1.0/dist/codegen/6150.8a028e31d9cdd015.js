(self.webpackChunkcodegen=self.webpackChunkcodegen||[]).push([[6150],{59770:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Y});var a=n(7560),i=n(40540),r=n.n(i),o=n(57106),s=n(56880);var l=n(78476);async function c(){return await n.e(139).then(n.t.bind(n,30139,23))}var d=n(46060),p=n.n(d),g=n(84452),u=n(95590),h=n.n(u);const v="string",m=/^application\/(\S+\+)?json/,y={async getSnippet(e,t,n,i="request"){let r,o=(0,a.Z)({},e),s=await c();return Promise.resolve().then((()=>{if(!o)throw new Error("CodegenService~getSnippet: Request not found.");return"example"===i&&o.requestObject?o.requestObject:o})).then((e=>g.SanitizeRequestService.sanitizeRequest(e))).then((e=>g.TransformRequest.transform(e))).then((e=>((e,t,n)=>{if(!e)return new Error("resolveVariables: request is a mandatory parameter");!1===(null==n?void 0:n.resolveSecretVariables)&&(t=t.filter((e=>"secret"!==e.type))),t=t.map((e=>{var t;return(null==(t=e.sessionValue)?void 0:t.length)>0&&(e.value=e.sessionValue),e}));const a=[new(h().VariableList)({},t)],i=new(h().Request)(e),r=new(h().Request)(i.toObjectResolved(null,a,{ignoreOwnVariables:!0}));let o=i.url.toString();return o&&(o=h().Property.replaceSubstitutions(o,a),r.url=new(h().Url)(o)),r})(e,t,{resolveSecretVariables:null==n?void 0:n.resolveSecretVariables}))).then((e=>{var t,n,a;const i=e.body;let r=null==e||null==(t=e.body)||null==(t=t.options)||null==(t=t.raw)?void 0:t.language,o=null==e||null==(n=e.body)?void 0:n.raw,s=null==e||null==(a=e.headers)||null==(a=a.reference)?void 0:a["content-type"];return o&&i&&"raw"===i.mode&&(r||s)?r&&"json"!==r?e:r||!s||function(e){return Array.isArray(e)&&(e=e.find((e=>!(e&&e.disabled)))),e&&typeof e.value===v&&m.test(e.value)}(s)?(typeof o!==v&&(o=JSON.stringify(o)),e.body.raw=p()(o,{whitespace:!1}),e):e:e})).then((e=>{if(!e)throw"CodegenService~getSnippet: Error in resolving request.";return e.headers.map((e=>(e.value||(e.value=""),e.value=e.value.toString()))),e.protocolProfileBehavior=o&&o.protocolProfileBehavior,s.convert(n.language,n.variant,e,n.optionsPreference,((e,t)=>{r=e||!t?{snippet:"Cannot generate snippet. See logs for more information."}:{snippet:t}})),r}))},getLanguages:async()=>(await c()).getLanguageList(),async getOptions(e,t){const n=await c();return new Promise(((a,i)=>{if(!e&&!t)return i(new Error("CodegenService~getOptions: Incorrect Parameters."));n.getOptions(e,t,((e,t)=>e?i(e):a(t)))}))}};var f=n(29875);const b="CODEGEN-SELECTED-LANGUAGE";var x=n(59530),S=n.n(x),w=n(58560),k=n(38394),C=n(45261),j=n(9460),L=n(74962),O=n(44645),_=n(80605),P=n(52322);const T=S().div.withConfig({displayName:"controls__MetaInfo",componentId:"sc-1nynj4r-0"})(["padding-left:16px;"]),N=S().div.withConfig({displayName:"controls__HeadingContainer",componentId:"sc-1nynj4r-1"})(["padding-left:16px;"]),E=S().div.withConfig({displayName:"controls__ControlBox",componentId:"sc-1nynj4r-2"})(["height:32px;& .aether-dropdown__control{background-color:",";:not(.aether-dropdown__control--menu-is-open){input{caret-color:transparent;}}}"],(e=>e.theme["background-color-secondary"])),M=S().div.withConfig({displayName:"controls__StyledSingleSelectContainer",componentId:"sc-1nynj4r-3"})(["cursor:pointer;"]),V=r().forwardRef(((e,t)=>{const{contentType:n,actionItem:a,blockInteraction:o,onCopy:s,blockHeight:l,isStoreHydrated:c}=e,[d,p]=(0,i.useState)(!1),[g,u]=(0,i.useState)(null),[h,v]=(0,i.useState)(!1),[m,y]=(0,i.useState)(!1);r().useImperativeHandle(t,(()=>({handleMouseOver(){"hover"===o&&(p(!0),clearTimeout(g))},handleMouseOut(){"hover"===o&&u(setTimeout((()=>{p(!1)}),0))}})));const f=()=>{v(!0),s(),clearTimeout(m),y(setTimeout((()=>{v(!1)}),1500))};return(0,P.jsx)(w.Z,{direction:"column",gap:"spacing-xs",children:(0,P.jsx)(E,{children:(0,P.jsxs)(w.Z,{justifyContent:"space-between",alignItems:"flex-end",children:[(0,P.jsx)(w.Z,{children:(0,P.jsx)("span",{children:("upfront"===o||d)&&(x=n,"meta"===n.type?(0,P.jsx)(T,{children:(0,P.jsx)(j.ZP,{type:"para",color:"content-color-secondary",children:x.value})}):"heading"===n.type?(0,P.jsx)(w.Z,{children:(0,P.jsx)(N,{children:(0,P.jsx)(L.Z,{text:x.value,color:"content-color-secondary",type:"h6",styleAs:"h5",hasBottomSpacing:!0})})}):(0,P.jsx)(M,{children:c&&(0,P.jsx)(O.Z,{onChange:n.value.onChange,options:x.value.options||[],value:n.value.value,triggerWidth:"auto",triggerType:"tertiary",triggerMaxWidth:180,isClearable:!1,menuMaxHeight:l,viaPortal:!0})}))})}),(0,P.jsxs)(w.Z,{children:[("upfront"===o||d)&&(0,P.jsx)("span",{children:(b=a,(0,P.jsx)(w.Z,{direction:"column",gap:"spacing-xs",children:b}))}),(0,P.jsx)("span",{children:h?(0,P.jsx)(_.Z,{onClick:f,type:"tertiary",icon:(0,P.jsx)(k.Z,{}),tooltip:"Copied"}):(0,P.jsx)(_.Z,{type:"tertiary",onClick:f,icon:(0,P.jsx)(C.Z,{}),tooltip:"Copy snippet"})})]})]})})});var b,x}));var Z=n(21730),$=n(20856),I=n(35736),H=n(35482),D=n(1590);const R=(0,i.lazy)((0,D.loadRemoteModule)("code-editor/CodeEditor")),q=r().forwardRef(((e,t)=>(0,P.jsx)(R,(0,a.Z)({},e,{ref:t})))),z=S().div.withConfig({displayName:"styles__EditorWrapper",componentId:"sc-79cg1b-0"})(["display:flex;flex-direction:column;padding-left:2px;max-height:",";overflow-y:auto;.monaco-editor-background{background-color:",";}div.scroll-decoration{box-shadow:none;}div.margin{background-color:",";}.line-numbers{color:"," !important;opacity:",";}.monaco-editor .view-overlays .current-line{background-color:",";}.decorationsOverviewRuler{display:none;}div.monaco-scrollable-element > .scrollbar > .slider{background:",";width:6px !important;border-radius:10px;transition:none !important;transform:none !important;}div.monaco-scrollable-element > .visible{background:",";width:6px !important;border-radius:10px;transition:none !important;transform:none !important;}div.monaco-scrollable-element > .invisible{width:6px !important;border-radius:10px;transition:none !important;transform:none !important;}"],(({blockHeight:e})=>e||"100%"),(e=>e.theme["background-color-secondary"]),(e=>e.theme["background-color-secondary"]),(e=>e.theme["content-color-tertiary"]),(({number:e})=>e?1:0),(e=>e.theme["background-color-secondary"]),(e=>e.theme["content-color-tertiary"]),(e=>e.theme["border-color-default"])),J=S().div.withConfig({displayName:"styles__ViewButtonContainer",componentId:"sc-79cg1b-1"})(["display:flex;direction:row;justify-content:flex-end;align-items:flex-end;"]),A=S().span.withConfig({displayName:"styles__SecretVariableToolTip",componentId:"sc-79cg1b-2"})(["cursor:pointer;"]),G=(0,x.createGlobalStyle)(["[class*='codegen-secret-variable-']{cursor:pointer !important;}[class*='secret-variable-codegen-hover-']{min-width:120px !important;z-index:-1000 !important;background-color:"," !important;border-radius:"," !important;padding:"," !important;box-shadow:"," !important;font-family:"," !important;font-size:"," !important;line-height:"," !important;font-weight:"," !important;}.monaco-hover{min-width:120px !important;z-index:-1000 !important;background-color:"," !important;border-radius:"," !important;padding:"," !important;box-shadow:"," !important;font-family:"," !important;font-size:"," !important;line-height:"," !important;font-weight:"," !important;}& .tooltip-secret-mask{& .tippy-content{min-width:120px;z-index:1000;background-color:",";border-radius:",";padding:",";box-shadow:",";font-family:",";font-size:",";line-height:",";font-weight:",";& .secret-variable-value{color:",";max-width:250px;word-break:break-all;white-space:normal;word-wrap:break-word;}}& .tippy-svg-arrow > svg{filter:",";}& .tippy-svg-arrow > svg > path{fill:",";}}"],(e=>e.theme["popover-background-color"]),(e=>e.theme["border-radius-default"]),(e=>e.theme["spacing-s"]),(e=>e.theme["popover-box-shadow"]),(e=>e.theme["text-family-default"]),(e=>e.theme["text-size-m"]),(e=>e.theme["line-height-m"]),(e=>e.theme["text-weight-regular"]),(e=>e.theme["popover-background-color"]),(e=>e.theme["border-radius-default"]),(e=>e.theme["spacing-s"]),(e=>e.theme["popover-box-shadow"]),(e=>e.theme["text-family-default"]),(e=>e.theme["text-size-m"]),(e=>e.theme["line-height-m"]),(e=>e.theme["text-weight-regular"]),(e=>e.theme["popover-background-color"]),(e=>e.theme["border-radius-default"]),(e=>e.theme["spacing-s"]),(e=>e.theme["popover-box-shadow"]),(e=>e.theme["text-family-default"]),(e=>e.theme["text-size-m"]),(e=>e.theme["line-height-m"]),(e=>e.theme["text-weight-regular"]),(e=>e.theme["content-color-primary"]),(e=>e.theme["popover-pointer-filter"]),(e=>e.theme["popover-background-color"])),W=(e,t,n,a)=>(0,P.jsx)(A,{children:(0,P.jsx)($.ZP,{trigger:(0,P.jsx)("span",{className:`secret-variable-masked-${t}`,children:e}),className:"tooltip-secret-mask",pointer:!0,triggerEvent:"mouseenter",placement:"left",children:(0,P.jsxs)(w.Z,{direction:"column",gap:"spacing-xs",children:[(0,P.jsxs)(w.Z,{direction:"row",gap:"spacing-s",children:[(0,P.jsx)(w.Z,{children:"NAME"}),(0,P.jsx)(w.Z,{className:"secret-variable-value",children:n})]}),(0,P.jsxs)(w.Z,{direction:"row",gap:"spacing-s",children:[(0,P.jsx)(w.Z,{children:"VALUE"}),(0,P.jsx)(w.Z,{className:"secret-variable-value",children:a})]})]})})}),U=e=>{const{codeSnippet:t,isLoading:n,loadingError:a,truncation:r,indentation:o,blockHeight:s,language:l,handleSnippetChange:c,number:d,maskedParameters:p}=e,[g,u]=(0,i.useState)([]),[h,v]=(0,i.useState)(!1),[m,y]=(0,i.useState)(s),[f,b]=(0,i.useState)(null),x="â€¢".repeat(6),[S,k]=(0,i.useState)(""),[C,L]=(0,i.useState)([]);(0,i.useEffect)((()=>{T()}),[t,p]),(0,i.useEffect)((()=>{N(f)}),[f]);const O=e=>{b(e),e.onDidLayoutChange((()=>{N(e)}))},T=()=>{var e;const n={};for(const e of p){var a;n[e.key]=(null==(a=e.sessionValue)?void 0:a.length)>0?e.sessionValue:e.value}let i=[],r=t||"";for(const e of Object.keys(n)){const t=[`{{${encodeURIComponent(e)}}}`,`%7B%7B${encodeURIComponent(e)}%7D%7D`];for(const n of t){const t=[...r.matchAll(new RegExp(n,"g"))].map((t=>[t.index,n,e]));i=[...i,...t],r=r.replace(new RegExp(n,"g"),x)}}i.sort(((e,t)=>e[0]-t[0])),0!==(null==(e=i)?void 0:e.length)&&u(i),k(r),L(n)},N=e=>{try{const t=e.getModel().findMatches(x);for(const[n,a]of t.entries()){const t=`codegen-secret-variable-${n}`;if(0===e.getModel().getDecorationsInRange(a.range).length){const n={range:a.range,options:{inlineClassName:t}};e.deltaDecorations([],[n])}}return null}catch(e){return null}},E=(e,t)=>{try{const e=f.getModel().findMatches(x);for(const[n,a]of e.entries()){const e=`codegen-secret-variable-${n}`;if(a.range.containsPosition(t)){const t=f.getDomNode().querySelector(`.${e}`),a=W(x,n,g[n][2],C[g[n][2]]);Z.render(a,t)}}return null}catch(e){return null}},M=()=>{v(!h),y(h?s:null)};return n?(0,P.jsx)(w.Z,{padding:"spacing-xxl",alignItems:"center",justifyContent:"center",children:(0,P.jsx)(w.Z,{children:(0,P.jsx)(I.Z,{})})}):a?(0,P.jsxs)(w.Z,{padding:"spacing-xxl",alignItems:"center",justifyContent:"center",children:[(0,P.jsx)(H.Z,{color:"content-color-secondary"}),(0,P.jsx)(j.ZP,{type:"para",children:"Â Failed to generate Code Snippet."})]}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(G,{}),(0,P.jsx)(z,{id:"codeblock-editor-wrapper",blockHeight:s,truncation:r,showMore:h,number:d,children:"view"===r?(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(q,{indentation:o,value:S,language:l,onChange:c,registerTextEditor:O,hoverProviders:[{provider:E.bind(void 0)}],hideCurrentLineHighlight:!0,autoResize:!0,minHeight:300,maxHeight:m,hideScrollbar:"vertical",handleMouseWheel:!1,hideCodeFolding:!0,renderIndentGuides:!1,lineDecorationsWidth:8,lineNumbersMinChars:d?3:0,wordWrap:!0}),(0,P.jsx)(J,{children:h?(0,P.jsx)(_.Z,{onClick:M,text:"View Less",type:"secondary",size:"small",minWidth:"85px"}):(0,P.jsx)(_.Z,{onClick:M,text:"View More",type:"secondary",size:"small",minWidth:"85px"})})]}):(0,P.jsx)(q,{indentation:o,value:S,language:l,onChange:c,registerTextEditor:O,hoverProviders:[{provider:E.bind(void 0)}],hideCurrentLineHighlight:!0,minHeight:300,height:m,hideCodeFolding:!0,showScrollbarForAutoResize:!0,renderIndentGuides:!1,lineDecorationsWidth:8,lineNumbersMinChars:d?3:0,wordWrap:!0})})]})},F=S().div.withConfig({displayName:"code-block__StyledComponent",componentId:"sc-1qlonhg-0"})(["background-color:",";color:",";border-radius:",";padding:8px;"],(e=>e.theme["background-color-secondary"]),(e=>e.theme["content-color-primary"]),(e=>e.theme["border-radius-default"])),B=e=>{const{codeSnippet:t,isLoading:n,language:a,contentType:r,actionItem:o,blockInteraction:s,onCopy:l,number:c,blockHeight:d,truncation:p,indentation:g,handleSnippetChange:u,maskedParameters:h,isStoreHydrated:v}=e,m=(0,i.useRef)(null);return(0,P.jsx)(F,{onMouseOver:()=>{m.current.handleMouseOver()},onMouseOut:()=>{m.current.handleMouseOut()},children:(0,P.jsxs)(w.Z,{direction:"column",gap:"spacing-xs",children:[(0,P.jsx)(V,{ref:m,contentType:r,actionItem:o,blockInteraction:s,onCopy:l,blockHeight:d,isStoreHydrated:v}),(0,P.jsx)(w.Z,{direction:"column",children:(0,P.jsx)(U,{indentation:g,codeSnippet:t,isLoading:n,maskedParameters:h,language:a,handleSnippetChange:u,blockHeight:d,truncation:p,number:c})})]})})};B.defaultProps={indentation:{indentationSize:2,indentationType:"tab"},contentType:{type:"meta"},language:"bash",blockInteraction:"upfront",truncation:"scroll",number:!0};const K=B;var Q=n(98276);class X extends r().PureComponent{constructor(e){super(e),this.state={activeLanguage:{language:"curl",variant:"cURL"},optionsPreference:{},codeSnippet:null,originalSnippetHash:"",selectedLanguage:{},isGenerating:!1,languageList:[]},this.handleCodeTypeSelect=this.handleCodeTypeSelect.bind(this),this.handleSnippetChange=this.handleSnippetChange.bind(this),this.handleCopyCode=this.handleCopyCode.bind(this),this.store=new class{constructor(){this.languagePreference="",this.snippetOptions={},this.languageList=[],this.labelEditorMap={},this.sessionVariables={},this.storage=new f.KVStorage("codegen-storage"),this.isHydrated=!1,(0,l.makeObservable)(this,{languagePreference:!0,snippetOptions:!0,languageList:!0,labelEditorMap:!0,sessionVariables:!0,isHydrated:!0,updateSnippetOptions:l.action,updateLanguagePreference:l.action,secretVariables:l.computed,initialize:l.action,getSnippetOptionForLanguage:l.action,getSnippetOptions:l.action,getLanguageList:l.action,getLanguagePreference:l.action}),this.initialize()}async initialize(){let e,t,n=[],a={};const i=await this.storage.get(b);if(this.languagePreference=i||JSON.stringify({language:"curl",variant:"cURL"}),e=await y.getLanguages(),e&&e.length>0){for(const i of e)if(i.variants&&0!==i.variants.length)if(i.variants.length>1)for(const e of i.variants)t=i.label+" - "+e.key,n.push({id:JSON.stringify({language:i.key,variant:e.key}),name:t}),a[`${i.key}_${e.key}`]={displayName:t,editorMode:i.syntax_mode};else t=i.label.toLowerCase()===i.variants[0].key.toLowerCase()?i.label:i.label+" - "+i.variants[0].key,n.push({id:JSON.stringify({language:i.key,variant:i.variants[0].key}),name:t}),a[`${i.key}_${i.variants[0].key}`]={displayName:t,editorMode:i.syntax_mode};this.languageList=n,this.labelEditorMap=a}this.isHydrated=!0}updateSnippetOptions(e,t,n){this.snippetOptions[`${t}_${n}`]=e||{}}getSnippetOptionForLanguage(e,t){return(0,l.toJS)(this.snippetOptions[`${e}_${t}`]||{})}getSnippetOptions(){return(0,l.toJS)(this.snippetOptions)}getLanguageList(){return(0,l.toJS)(this.languageList)}updateLanguagePreference(e){this.languagePreference=e,this.storage.set(b,e)}getLanguagePreference(){return(0,l.toJS)(this.languagePreference)}get secretVariables(){return Object.keys(this.sessionVariables).map((e=>this.sessionVariables[e].values.filter((e=>"secret"===e.type))))}},this.throttledGenerateSnippet=function(e,t,n){let a,i,r,o,s,l,c=0,d=!1,p=!1,g=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(t=+t||0,n&&function(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)}(n)){if(d=!(null==n||!n.leading),p="maxWait"in n,p){const e=(null==n?void 0:n.maxWait)||0;r=Math.max(+e,t)}g="trailing"in n?!(null==n||!n.trailing):g}function u(t){const n=a,r=i;return a=i=void 0,c=t,o=e.apply(r,n),o}function h(e,t){return setTimeout(e,t)}function v(e){const n=e-l;return void 0===l||n>=t||n<0||p&&e-c>=r}function m(){const e=Date.now();if(v(e))return y(e);s=h(m,function(e){const n=e-c,a=t-(e-l);return p?Math.min(a,r-n):a}(e))}function y(e){return s=void 0,g&&a?u(e):(a=i=void 0,o)}function f(...e){const n=Date.now(),r=v(n);if(a=e,i=this,l=n,r){if(void 0===s)return function(e){return c=e,s=h(m,t),d?u(e):o}(l);if(p)return s=h(m,t),u(l)}return void 0===s&&(s=h(m,t)),o}return f.cancel=function(){void 0!==s&&clearTimeout(s),c=0,a=l=i=s=void 0},f.flush=function(){return void 0===s?o:y(Date.now())},f.pending=function(){return void 0!==s},f}(this.handleCodeTypeSelect.bind(this),500,{leading:!1,trailing:!0}),this.selectedTarget=this.selectedTarget.bind(this),this.getSecretVariables=this.getSecretVariables.bind(this)}async componentDidMount(){var e,t,n;await(0,l.when)((()=>this.store.isHydrated));var a={value:this.store.languagePreference},{language:i,variant:r}="object"==typeof a.value?a:JSON.parse(a.value);this.setState({codeSnippet:"",isGenerating:!0,activeLanguage:{language:i,variant:r}}),this.throttledGenerateSnippet(a),s.AnalyticsService.addEventV2({category:"codegen",action:"open_codegen_contextbar",label:`${i}_${r}`}),s.AnalyticsService.addEventV2({category:"api-design",action:"interact",label:"read",value:1,entityType:"collection",entityId:null==(e=this.props.requestData)?void 0:e.parentCollectionId});let o,c,d=[],p={};y.getLanguages().then((e=>{if(o=e,o&&o.length>0){for(const e of o)if(e.variants&&0!==e.variants.length)if(e.variants.length>1)for(const t of e.variants)c=e.label+" - "+t.key,d.push({id:JSON.stringify({language:e.key,variant:t.key}),name:c,value:JSON.stringify({language:e.key,variant:t.key}),label:c}),p[`${e.key}_${t.key}`]={displayName:c,editorMode:e.syntax_mode};else c=e.label.toLowerCase()===e.variants[0].key.toLowerCase()?e.label:e.label+" - "+e.variants[0].key,d.push({id:JSON.stringify({language:e.key,variant:e.variants[0].key}),name:c,value:JSON.stringify({language:e.key,variant:e.variants[0].key}),label:c}),p[`${e.key}_${e.variants[0].key}`]={displayName:c,editorMode:e.syntax_mode};this.setState({languageList:d,labelEditorMap:p})}})),s.AnalyticsService.addEventV2({category:"ad_codegen",action:"open_codegen_contextbar_client",label:this.state.activeLanguage?`${this.state.activeLanguage.language} - ${this.state.activeLanguage.variant}`:void 0,entityType:"example"===(null==(t=this.props)?void 0:t.type)?"example":"request",entityId:null==(n=this.props.requestData)?void 0:n.id})}componentWillUnmount(){this.disposePreviewReaction&&this.disposePreviewReaction()}componentDidUpdate(e){JSON.stringify(e)!==JSON.stringify(this.props)&&"object"==typeof this.state.selectedLanguage&&Object.keys(this.state.selectedLanguage).length>0&&this.throttledGenerateSnippet(this.state.selectedLanguage)}hash(e){return n(5634).createHash("sha1").update(e).digest("base64")}handleCodeTypeSelect(e){var t,n;if(!e||"object"==typeof e&&0===Object.keys(e).length)return;this.setState({selectedLanguage:e,isGenerating:!0});let a,i=e?JSON.parse(e.value):this.store.languagePreference,{language:r,variant:o}=i,l={};this.setState({activeLanguage:{language:r,variant:o}}),s.AnalyticsService.addEventV2({category:"ad_codegen",action:"select_language_client",label:`${r} - ${o}`,entityType:"example"===(null==(t=this.props)?void 0:t.type)?"example":"request",entityId:null==(n=this.props.requestData)?void 0:n.id}),y.getOptions(r,o).then((e=>{if(e&&e.length>0)for(const t of e)l[t.value]=t.default})).catch((e=>{})).then((()=>{a=this.store.getSnippetOptionForLanguage(r,o)||l})).then((()=>{y.getSnippet(this.props.requestData||{},this.props.variableData,{language:r,variant:o,optionsPreference:a,resolveSecretVariables:!1}).then((e=>{if(!e)return;let t=this.hash(e.snippet);var n,i;t!==this.state.originalSnippetHash&&(s.AnalyticsService.addEventV2({category:"ad_codegen",action:"configure_client",label:`${r} - ${o}`,entityType:"example"===(null==(n=this.props)?void 0:n.type)?"example":"request",entityId:null==(i=this.props.requestData)?void 0:i.id}),this.setState({codeSnippet:e.snippet,originalSnippetHash:t},(()=>{let e=JSON.stringify({language:r,variant:o});this.store.updateLanguagePreference(e)}))),this.setState({optionsPreference:a,isGenerating:!1})}))}))}handleSnippetChange(e){this.setState({codeSnippet:e})}selectedTarget(){var e=this.state.languageList,t=`{"language":"${this.state.activeLanguage.language}","variant":"${this.state.activeLanguage.variant}"}`;return e.find((e=>e.value===t))||{value:'{language:"curl",variant:"cURL"}',label:"cURL"}}async handleCopyCode(){var e,t,n,a,i,r;if(0===(null==(e=this.props.variableData)?void 0:e.filter((e=>"secret"===e.type))).length)navigator.clipboard.writeText(this.state.codeSnippet);else{var o,l;let e=null==(o=this.state.activeLanguage)?void 0:o.language,t=null==(l=this.state.activeLanguage)?void 0:l.variant,n=this.state.optionsPreference;const{snippet:a}=await y.getSnippet(this.props.requestData||{},this.props.variableData,{language:e,variant:t,optionsPreference:n,resolveSecretVariables:!0});navigator.clipboard.writeText(a)}s.AnalyticsService.addEventV2({category:"ad_codegen",action:"copy_code",label:null!=(t=this.state)&&t.activeLanguage?`${null==(n=this.state.activeLanguage)?void 0:n.language} - ${null==(a=this.state.activeLanguage)?void 0:a.variant}`:void 0,entityType:"example"===(null==(i=this.props)?void 0:i.type)?"example":"request",entityId:null==(r=this.props.requestData)?void 0:r.id})}getSecretVariables(){return this.props.variableData.filter((e=>"secret"===e.type))}render(){var e,t,n;let a=(null==(e=this.state.activeLanguage)?void 0:e.language)||"curl",i=(null==(t=this.state.activeLanguage)?void 0:t.variant)||"cURL",r=this.store.labelEditorMap&&this.store.labelEditorMap[`${a}_${i}`]?this.store.labelEditorMap[`${a}_${i}`].editorMode:"powershell",o={indentationType:null!=(n=this.state.optionsPreference)&&n.indentType?this.state.optionsPreference.indentType.toLowerCase():null,indentationSize:this.state.optionsPreference.indentCount||null};return"dart"===r&&(r="powershell"),(0,P.jsx)("div",{className:"context-bar-code-snippet-view",children:(0,P.jsx)("div",{className:"context-bar-code-snippet-body",children:(0,P.jsx)(K,{indentation:o,codeSnippet:this.state.codeSnippet,isLoading:this.state.isGenerating,language:r,handleSnippetChange:this.handleSnippetChange,variant:this.state.activeLanguage.variant,blockHeight:"calc(100vh - 108px)",contentType:{type:"selection",value:{options:this.state.languageList,onChange:e=>{this.handleCodeTypeSelect(e)},value:this.selectedTarget()}},isStoreHydrated:this.store.isHydrated,onCopy:this.handleCopyCode,maskedParameters:this.getSecretVariables(),number:!0})})})}}const Y=(0,o.observer)((e=>{const{data:t}=(0,Q.useActiveVariables)();return(0,P.jsx)(X,(0,a.Z)({},e,{variableData:t}))}))},38087:()=>{},74854:()=>{},66602:()=>{}}]);
//# sourceMappingURL=6150.8a028e31d9cdd015.js.map